ip=<IP>;ports=$(nmap -T5 -p- $ip -Pn | grep '^[0-9]' | cut -d "/" -f1 | tr '\n' "," | sed s/,$//); echo -e "\n[+] Discovered ports --> $ports\n"; nmap -T5 -A -p$ports $ip -Pn -oA $ip


# O, we can split the command above in two:

nmap 192.168.238.247 -p- --min-rate 10000 | grep '^[0-9]' | cut -d "/" -f1 | tr '\n' ','

# Then, the output will be a line of open ports separated by commas. Then, we use the following output 

nmap -A -T5 -p<ports>
